{% extends "network/layout.html" %}

{% block body %}
{% if user.is_authenticated %}
<form method="post" action='{% url "index" %}'>
        {% csrf_token %}
        {% if message %}
        <h1>{{message}}</h1>
        {% endif %}
        <div class="form-group">
            <label for="new_post"><strong>New Post</strong></label>
            <textarea class="form-control" id="new_post" rows="3" name="message"></textarea>
          </div>
        <input type="submit" value="Post" class="btn btn-primary">
    </form>
{% endif %}
    
    <ul class="list-group-item">
    {% for post in posts %}
        <h5>@{{post.author}}</h5>
        <li class="list-group-item">
            <p class="nm">{{post.message}}</p>
            <small class="text-muted">{{post.created_at}} | <a href="/like-post?post_id={{post.id}}">
                <svg width="25px" height="25px" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="48" height="48" fill="white" fill-opacity="0.01"/>
                    <path d="M15 8C8.92487 8 4 12.9249 4 19C4 30 17 40 24 42.3262C31 40 44 30 44 19C44 12.9249 39.0751 8 33 8C29.2797 8 25.9907 9.8469 24 12.6738C22.0093 9.8469 18.7203 8 15 8Z" fill="#2F88FF" stroke="#000000" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
            </a>
            Liked by {{post.no_of_likes}} people.
        </small>
        </li>
        <hr/>
    {% endfor %}
    </ul>
{% endblock %}